<%- include('./partials/header.ejs') %>
<%- include('./partials/navbar.ejs') %>
<main>
    <%- include('./partials/sidebar.ejs') %>
    <div class="content">
        <div class="container-fluid">
    <div class="card">
        <div class="card-header"><h5>List of Users<h5></div>
        <div class="card-body">
    <table class="table">
        <thead >
        <tr>
            <th scope="col">Name
            </th>
            <th scope="col">Gender
            </th>
            <th scope="col">Seat
            </th>
            <th scope="col">Balance
            </th>
            <th scope="col" class="text-center w-25">Action</th>
        </tr>
        </thead>
        <tbody>
        <% users.forEach((user, i)=>{ %>
            <tr>
                <td class="text-break"><span
                            class="d-md-none w-bold">Name : </span><%= user.profile.firstName %></td>
                <td class="text-break"><span
                            class="d-md-none w-bold">Gender : </span><%= user.profile.gender %></td>
                <td class="text-break"><span
                            class="d-md-none w-bold">Seat : </span>
                    <% if(user.seat){ let details =`Seat : ${user.seat.seatName}<br/>Room : ${user.seat.roomName}<br/>Hostel : ${user.seat.hostelName}`%>
                    <span data-bs-toggle="tooltip" data-bs-placement="top" title="<%= details %>">
                        <%= user.seat.hostelName %>
                    </span>

                    <% } else {%>
                          Unavailable
                    <%}%>
                </td>
                <td class="text-break"><span
                            class="d-md-none w-bold">Balance : </span><%= user.status %></td>
                <td class="text-break d-flex justify-content-around"><a class="btn bg-gradient btn-primary"
                                                                        href="./user/review/<%= user._id %>">View</a>
                    </td>
            </tr>
        <% }) %>

        </tbody>

    </table>


    <nav aria-label="Page navigation example">
        <ul class="pagination justify-content-end">
            <li class="page-item  <% if(Number(stats.page) <= 1){ %>disabled<% }; %>">
                <a class="page-link" href="?p=1">First Page</a>
            </li>
            <% for(let i = Number(stats.page) - 3;(i < Number(stats.page) + 3) && (i <= stats.totalPage);i++){if (i < 1) continue; %>
            <li class="page-item <% if(stats.page == i){ %>active<% }; %>"><a class="page-link"
                                                                              href="?p=<%= i %>"><%= i %></a></li>
            <% }; %>

            <li class="page-item <% if(stats.page ==stats.totalPage){ %>disabled<% }; %>">
                <a class="page-link" href="?p=<%= stats.totalPage %>">Last Page</a>
            </li>
        </ul>
    </nav>
</div>
</div>
        </div>
<%- include('./partials/footer.ejs') %>

<!--<div class="list-group">-->
<!--    -->
<!--    <a class="list-group-item list-group-item-action " href="#">-->
<!--        <div class="d-flex justify-content-between"><p>Name : Farhan Sajid</p><p>Gender : Male</p></div>-->
<!--        <p>Hostel :</p>-->
<!--        <div class="d-flex justify-content-between text-muted"><p>Application Date : </p>-->
<!--            <p class="badge bg-primary">Pending</p></div>-->
<!--    </a>-->
<!--</div>-->